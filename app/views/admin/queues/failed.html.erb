<div class="max-w-4xl mx-auto py-8">
  <div class="mb-4">
    <%= link_to "â† Back to queue", admin_queue_path, class: "text-sm text-indigo-600 hover:text-indigo-800" %>
  </div>

  <div class="bg-white border rounded-lg shadow-sm p-4">
    <h1 class="text-2xl font-semibold mb-2">Failed Job #<%= @failed_execution.job_id %></h1>
    <p class="text-gray-700 mb-4"><strong>Class:</strong> <%= @failed_execution.job&.class_name || "Unknown" %></p>
    <p class="text-gray-700 mb-4"><strong>Recorded at:</strong> <%= l(@failed_execution.created_at, format: :long) %></p>

    <% if @job_arguments.present? %>
      <div class="mb-4">
        <h2 class="text-lg font-semibold text-gray-900 mb-2">Job Arguments</h2>
        <pre class="bg-gray-100 border rounded p-3 text-xs overflow-x-auto"><%= JSON.pretty_generate(@job_arguments) rescue @job_arguments.inspect %></pre>
      </div>
    <% end %>

    <div class="mb-4">
      <h2 class="text-lg font-semibold text-gray-900 mb-2">Error</h2>
      <p class="text-red-700 whitespace-pre-line"><%= @failed_execution.error.with_indifferent_access[:message] %></p>
    </div>

    <div>
      <h2 class="text-lg font-semibold text-gray-900 mb-2">Backtrace</h2>
      <pre class="bg-gray-100 border rounded p-3 text-xs overflow-x-auto"><%= Array(@failed_execution.error.with_indifferent_access[:backtrace]).join("\n") %></pre>
    </div>
  </div>
</div>
